{"ast":null,"code":"var _jsxFileName = \"C:\\\\we-transfer-clone\\\\app\\\\src\\\\components\\\\HomeForm.js\";\nimport React, { Component } from 'react';\n\nconst _ = require('lodash');\n\nexport default class HomeForm extends Component {\n  constructor(props) {\n    super(props);\n\n    this._isEmail = emailAddress => {\n      const emailRegex = /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\n      return emailRegex.test(emailAddress);\n    };\n\n    this._checkForm = (fields = [], callback) => {\n      let {\n        form,\n        errors\n      } = this.state;\n      const validations = {\n        to: [{\n          errorMessage: \"To is required !\",\n          isValid: () => {\n            return form.to.length;\n          }\n        }, {\n          errorMessage: \"Email is not valid\",\n          isValid: () => {\n            return this._isEmail(form.to);\n          }\n        }],\n        from: [{\n          errorMessage: \"From is required !\",\n          isValid: () => {\n            return form.from.length;\n          }\n        }, {\n          errorMessage: \"Email is not valid\",\n          isValid: () => {\n            return this._isEmail(form.from);\n          }\n        }]\n      };\n\n      _.each(fields, field => {\n        let fieldValidations = _.get(validations, field, []); //validations[field]\n\n\n        errors[field] = null;\n\n        _.each(fieldValidations, fieldValidation => {\n          const isValid = fieldValidation.isValid();\n\n          if (!isValid) {\n            errors[field] = fieldValidation.errorMessage;\n          }\n        });\n      });\n\n      this.setState({\n        errors: errors\n      }, () => {\n        let isValid = true;\n\n        _.each(errors, err => {\n          if (err != null) {\n            isValid = false;\n          }\n        });\n\n        return callback(isValid);\n      });\n    };\n\n    this._onTextChange = event => {\n      let {\n        form\n      } = this.state;\n      const fieldName = event.target.name;\n      const fieldValue = event.target.value;\n      form[fieldName] = fieldValue;\n      this.setState({\n        form: form\n      });\n    };\n\n    this._onFileAdded = event => {\n      let files = this.state.form.files;\n\n      _.each(_.get(event, 'target.files', []), file => {\n        files.push(file);\n      });\n\n      console.log(\"files added : \", files);\n      this.setState({\n        form: { ...this.state.form,\n          files: files\n        }\n      });\n    };\n\n    this._onSubmit = event => {\n      event.preventDefault();\n\n      this._checkForm(['from', 'to'], isValid => {\n        console.log(\"the form is validated = \", isValid);\n      }); //console.log(this.state.form);\n\n    };\n\n    this.state = {\n      form: {\n        files: [],\n        to: '',\n        from: '',\n        message: ''\n      },\n      errors: {\n        to: null,\n        from: null,\n        message: null\n      }\n    };\n    this._onTextChange = this._onTextChange.bind(this);\n    this._onSubmit = this._onSubmit.bind(this);\n    this._checkForm = this._checkForm.bind(this);\n    this._onFileAdded = this._onFileAdded.bind(this);\n    this._onFileRemove = this._onFileRemove.bind(this);\n  }\n\n  _onFileRemove(key) {\n    let {\n      files\n    } = this.state.form;\n    files.splice(key, 1);\n    this.setState({\n      form: { ...this.state.form,\n        files: files\n      }\n    });\n  }\n\n  render() {\n    const {\n      form\n    } = this.state;\n    const {\n      files\n    } = form;\n    const list = React.createElement(\"div\", {\n      className: \"app-files-selected\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, files.map((file, index) => {\n      return React.createElement(\"div\", {\n        className: \"app-file-selected-item\",\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"file-name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, file.name), React.createElement(\"div\", {\n        className: \"file-action\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"app-file-remove\",\n        type: \"button\",\n        onClick: () => this._onFileRemove(index),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, \"X\")));\n    }));\n    return React.createElement(\"div\", {\n      className: \"app-card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this._onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"app-card-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"app-card-header-inner\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, files.length ? list : null, React.createElement(\"div\", {\n      className: \"app-file-select-zone\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"input-file\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      id: \"input-file\",\n      type: \"file\",\n      onChange: this._onFileAdded,\n      multiple: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }), files.length ? React.createElement(\"span\", {\n      className: \"app-upload-description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, \"Add more files\") : React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"app-upload-icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"app-upload-description text-uppercase\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, \"Drag and Drop your Files Here\")))))), React.createElement(\"div\", {\n      className: \"app-card-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"app-card-content-inner\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"app-form-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"to\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, \"Send To\"), React.createElement(\"input\", {\n      name: \"to\",\n      value: form.to,\n      onChange: this._onTextChange,\n      type: \"text\",\n      placeholder: \"Email Address\",\n      id: \"to\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"app-form-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"from\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, \"From\"), React.createElement(\"input\", {\n      name: \"from\",\n      value: form.from,\n      onChange: this._onTextChange,\n      type: \"text\",\n      placeholder: \"Your Email Address\",\n      id: \"from\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"app-form-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      htmlFor: \"message\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, \"Message\"), React.createElement(\"textarea\", {\n      id: \"message\",\n      value: form.message,\n      onChange: this._onTextChange,\n      placeholder: \"Add a note (optional)\",\n      name: \"message\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"app-form-actions\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"app-button primary\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, \"Send\"))))));\n  }\n\n}","map":{"version":3,"sources":["C:/we-transfer-clone/app/src/components/HomeForm.js"],"names":["React","Component","_","require","HomeForm","constructor","props","_isEmail","emailAddress","emailRegex","test","_checkForm","fields","callback","form","errors","state","validations","to","errorMessage","isValid","length","from","each","field","fieldValidations","get","fieldValidation","setState","err","_onTextChange","event","fieldName","target","name","fieldValue","value","_onFileAdded","files","file","push","console","log","_onSubmit","preventDefault","message","bind","_onFileRemove","key","splice","render","list","map","index"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nconst _ = require('lodash');\r\n\r\nexport default class HomeForm extends Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n    \r\n        this.state = {\r\n             form : {\r\n                 files : [],\r\n                 to : '',\r\n                 from : '',\r\n                 message : ''\r\n             },\r\n\r\n             errors : {\r\n                 to : null,\r\n                 from : null,\r\n                 message : null\r\n             }\r\n        }\r\n\r\n        this._onTextChange = this._onTextChange.bind(this);\r\n        this._onSubmit = this._onSubmit.bind(this);\r\n        this._checkForm = this._checkForm.bind(this);\r\n        this._onFileAdded = this._onFileAdded.bind(this);\r\n        this._onFileRemove = this._onFileRemove.bind(this);\r\n    }\r\n\r\n    _isEmail = (emailAddress) => {\r\n        const emailRegex = /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\r\n        \r\n        return emailRegex.test(emailAddress);\r\n    }\r\n\r\n    _checkForm = (fields = [], callback) => {\r\n\r\n        let {form, errors} = this.state;\r\n\r\n        const validations = {\r\n\r\n            to : [\r\n                {\r\n                    errorMessage : \"To is required !\",\r\n                    isValid : () => {\r\n                        return form.to.length;\r\n                    }\r\n                },\r\n\r\n                {\r\n                    errorMessage : \"Email is not valid\",\r\n                    isValid : () => {\r\n                        return this._isEmail(form.to);\r\n                    }\r\n                }\r\n            ],\r\n\r\n            from : [\r\n                {\r\n                    errorMessage : \"From is required !\",\r\n                    isValid : () => {\r\n                        return form.from.length;\r\n                    }\r\n                },\r\n\r\n                {\r\n                    errorMessage : \"Email is not valid\",\r\n                    isValid : () => {\r\n                        return this._isEmail(form.from);\r\n                    }\r\n                }\r\n            ]\r\n        }\r\n\r\n        _.each(fields, field => {\r\n\r\n            let fieldValidations = _.get(validations, field, []); //validations[field]\r\n\r\n            errors[field] = null;\r\n\r\n            _.each(fieldValidations, fieldValidation => {\r\n                \r\n                const isValid = fieldValidation.isValid();\r\n\r\n                if(!isValid) {\r\n\r\n                    errors[field] = fieldValidation.errorMessage;\r\n                }\r\n            })\r\n        })\r\n\r\n        this.setState({\r\n            errors : errors\r\n        }, () => {\r\n            let isValid = true;\r\n            _.each(errors, (err) => {\r\n                if(err != null) {\r\n                    isValid = false;\r\n                }\r\n            });\r\n            return callback(isValid);\r\n        })\r\n    }\r\n    \r\n    _onTextChange = (event) => {\r\n\r\n        let {form} = this.state;\r\n        const fieldName = event.target.name;\r\n        const fieldValue = event.target.value;\r\n\r\n        form[fieldName] = fieldValue;\r\n        this.setState({\r\n            form : form\r\n        })\r\n    }\r\n\r\n    _onFileAdded = (event) => {\r\n\r\n        let files = this.state.form.files;\r\n\r\n        _.each(_.get(event, 'target.files', []), file => {\r\n            files.push(file);\r\n        })\r\n\r\n        console.log(\"files added : \", files);\r\n\r\n        this.setState({\r\n            form : {\r\n                ...this.state.form,\r\n                files : files\r\n            }\r\n        })\r\n    }\r\n\r\n    _onFileRemove(key) {\r\n        let {files} = this.state.form;\r\n        files.splice(key, 1);\r\n\r\n        this.setState({\r\n            form : {\r\n                ...this.state.form,\r\n                files : files\r\n            }\r\n        })\r\n    }\r\n\r\n    _onSubmit = (event) => {\r\n        event.preventDefault();\r\n        this._checkForm(['from', 'to'], (isValid) => {\r\n            console.log(\"the form is validated = \", isValid);\r\n        });\r\n        //console.log(this.state.form);\r\n    }\r\n\r\n    render() {\r\n\r\n        const {form} = this.state;\r\n        const {files} = form;\r\n\r\n        const list = (\r\n                    <div className=\"app-files-selected\">\r\n                        {\r\n                                \r\n                                files.map((file, index) => {\r\n                                    return (\r\n                                    <div className=\"app-file-selected-item\" key={index}>\r\n                                        <div className=\"file-name\">{file.name}</div>\r\n                                        <div className=\"file-action\">\r\n                                            <button className=\"app-file-remove\" type=\"button\" onClick={() => this._onFileRemove(index)}>X</button>\r\n                                        </div>\r\n                                    </div>\r\n                                    )\r\n                                })\r\n                        }\r\n                        \r\n                    </div>\r\n                    )\r\n\r\n        return (\r\n            \r\n            <div className=\"app-card\">\r\n                <form onSubmit={this._onSubmit}>\r\n                    <div className=\"app-card-header\">\r\n                        <div className=\"app-card-header-inner\">\r\n                            {\r\n                                files.length ? list : null\r\n                            }\r\n                            <div className=\"app-file-select-zone\">\r\n                                <label htmlFor='input-file'>\r\n                                    <input id='input-file' type=\"file\" onChange={this._onFileAdded} multiple={true} />\r\n                                    {\r\n                                        files.length ? <span className=\"app-upload-description\">Add more files</span> : <span>\r\n                                                                                                                            <span className=\"app-upload-icon\"/>\r\n                                                                                                                                <span className=\"app-upload-description text-uppercase\">\r\n                                                                                                                                    Drag and Drop your Files Here\r\n                                                                                                                            </span>\r\n                                                                                                                        </span>\r\n                                    }\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"app-card-content\">\r\n                        <div className=\"app-card-content-inner\">\r\n                            <div className=\"app-form-item\">\r\n                                <label htmlFor=\"to\">Send To</label>\r\n                                <input name=\"to\" value={form.to} onChange={this._onTextChange} type=\"text\" placeholder=\"Email Address\" id=\"to\" /> \r\n                            </div>\r\n\r\n                            <div className=\"app-form-item\">\r\n                                <label htmlFor=\"from\">From</label>\r\n                                <input name=\"from\" value={form.from} onChange={this._onTextChange} type=\"text\" placeholder=\"Your Email Address\" id=\"from\" /> \r\n                            </div>\r\n\r\n                            <div className=\"app-form-item\">\r\n                                <label htmlFor=\"message\">Message</label>\r\n                                <textarea id=\"message\" value={form.message} onChange={this._onTextChange} placeholder=\"Add a note (optional)\" name=\"message\" />\r\n                            </div>\r\n\r\n                            <div className=\"app-form-actions\">\r\n                                <button className=\"app-button primary\" type=\"submit\">Send</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n          \r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}