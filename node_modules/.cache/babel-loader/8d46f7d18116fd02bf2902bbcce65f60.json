{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ENVIRONMENT = exports.inferDevSize = exports.filesystemSync = undefined;\n\nvar _toConsumableArray2 = require('babel-runtime/helpers/toConsumableArray');\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _typeof2 = require('babel-runtime/helpers/typeof');\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _os = require('os');\n\nvar _os2 = _interopRequireDefault(_os);\n\nvar _child_process = require('child_process');\n\nvar _child_process2 = _interopRequireDefault(_child_process);\n\nvar _bluebird = require('bluebird');\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _functional = require('./functional');\n\nvar _functional2 = _interopRequireDefault(_functional);\n\nvar _utilities = require('./utilities');\n\nvar _linux = require('./linux');\n\nvar _linux2 = _interopRequireDefault(_linux);\n\nvar _macOS = require('./macOS');\n\nvar _macOS2 = _interopRequireDefault(_macOS);\n\nvar _windows = require('./windows');\n\nvar _windows2 = _interopRequireDefault(_windows);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar tautology = _functional2.default.tautology,\n    thrower = _functional2.default.thrower;\nvar _F$R = _functional2.default.R,\n    compose = _F$R.compose,\n    composeP = _F$R.composeP;\n_child_process2.default.exec = _bluebird2.default.promisify(_child_process2.default.exec, {\n  context: _child_process2.default\n}); // --------------------------------------\n// Common Core - Validation\n// --------------------------------------\n\nvar validateDev = function validateDev(dev) {\n  if (typeof dev === 'function') {\n    return dev;\n  } else if (typeof dev === 'string') {\n    return function (v, k) {\n      return (0, _utilities.hasSubstr)(k, dev);\n    };\n  } else if (dev instanceof RegExp) {\n    return function (v, k) {\n      return dev.test(k);\n    };\n  } else if (typeof dev === 'undefined' || dev === null) {\n    return tautology;\n  }\n\n  thrower('fs.filesystem expected first argument \\'dev\\' to be a function, string, regex or undefined/null. ' + ('Found ' + ((typeof dev === 'undefined' ? 'undefined' : (0, _typeof3.default)(dev)) === 'object' ? dev.constructor.name : typeof dev === 'undefined' ? 'undefined' : (0, _typeof3.default)(dev)) + ' instead.'), TypeError);\n};\n\nvar validateCallback = function validateCallback(cb) {\n  if (typeof cb !== 'function') {\n    thrower('fs.filesystem expected second argument \\'callback\\' to be instanceof function. ' + ('Found ' + ((typeof cb === 'undefined' ? 'undefined' : (0, _typeof3.default)(cb)) === 'object' ? cb.constructor.name : typeof cb === 'undefined' ? 'undefined' : (0, _typeof3.default)(cb)) + ' instead.'), TypeError);\n  }\n\n  return cb;\n};\n\nvar validate = function validate(validateDev, validateCallback) {\n  return function (dev, callback) {\n    if (typeof dev === 'function' && !callback) {\n      return [tautology, dev];\n    }\n\n    return [validateDev(dev), validateCallback(callback)];\n  };\n}; // --------------------------------------\n// Common Core - Main & Export Functions\n// --------------------------------------\n\n\nvar ENVIRONMENT = {\n  env: {\n    LANG: 'en_US.UTF-8',\n    PATH: process.env.PATH\n  }\n};\n\nvar execute = function execute(cmd, parser) {\n  return function (filter, cb) {\n    var sync = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n    if (sync) {\n      return compose(parser(filter), _utilities.stringify, _child_process2.default.execSync)(cmd, ENVIRONMENT);\n    }\n\n    return composeP(function (v) {\n      return cb(null, v);\n    }, parser(filter), _utilities.stringify, _child_process2.default.exec)(cmd, ENVIRONMENT).catch(cb);\n  };\n};\n\nvar inferDevSize = function inferDevSize(result) {\n  for (var k in result) {\n    if (result[k].size === null) {\n      var sizeSum = result[k].volumes.reduce(function (size, vol) {\n        return size + vol.space.total;\n      }, 0);\n      result[k].size = sizeSum;\n    }\n  }\n\n  return result;\n};\n\nvar filesystem = function filesystem(macOS, linux, windows, validate, platform) {\n  return function (dev, callback) {\n    var devices = null;\n\n    switch (platform) {\n      case 'darwin':\n        devices = macOS.apply(undefined, (0, _toConsumableArray3.default)(validate(dev, callback))).devices;\n        break;\n\n      case 'linux':\n        devices = linux.apply(undefined, (0, _toConsumableArray3.default)(validate(dev, callback))).devices;\n        break;\n\n      case 'win32':\n        devices = windows.apply(undefined, (0, _toConsumableArray3.default)(validate(dev, callback))).devices;\n        break;\n\n      default:\n        thrower('fs.filesystem : Unsupported OS. fs.filesystem does not support ' + (platform + ' at the moment'));\n    }\n\n    return inferDevSize(devices);\n  };\n};\n\nvar filesystemSync = function filesystemSync(macOS, linux, windows, validateDev, platform) {\n  return function (dev) {\n    var devices = null;\n\n    switch (platform) {\n      case 'darwin':\n        devices = macOS(validateDev(dev), null, true).devices;\n        break;\n\n      case 'linux':\n        devices = linux(validateDev(dev), null, true).devices;\n        break;\n\n      case 'win32':\n        devices = windows(validateDev(dev), null, true).devices;\n        break;\n\n      default:\n        thrower('fs.filesystem : Unsupported OS. fs.filesystem does not support ' + (platform + ' at the moment'));\n    }\n\n    return inferDevSize(devices);\n  };\n};\n\nvar sync = filesystemSync(execute(_macOS2.default.COMMAND, _macOS2.default.parser), execute(_linux2.default.COMMAND, _linux2.default.parser), execute(_windows2.default.COMMAND, _windows2.default.parser), validateDev, _os2.default.platform());\nexports.filesystemSync = sync;\nexports.inferDevSize = inferDevSize;\nexports.ENVIRONMENT = ENVIRONMENT;\nexports.default = filesystem(execute(_macOS2.default.COMMAND, _macOS2.default.parser), execute(_linux2.default.COMMAND, _linux2.default.parser), execute(_windows2.default.COMMAND, _windows2.default.parser), validate(validateDev, validateCallback), _os2.default.platform());","map":{"version":3,"sources":["C:/we-transfer-clone/app/node_modules/fs-filesystem/esm/index.js"],"names":["Object","defineProperty","exports","value","ENVIRONMENT","inferDevSize","filesystemSync","undefined","_toConsumableArray2","require","_toConsumableArray3","_interopRequireDefault","_typeof2","_typeof3","_os","_os2","_child_process","_child_process2","_bluebird","_bluebird2","_functional","_functional2","_utilities","_linux","_linux2","_macOS","_macOS2","_windows","_windows2","obj","__esModule","default","tautology","thrower","_F$R","R","compose","composeP","exec","promisify","context","validateDev","dev","v","k","hasSubstr","RegExp","test","constructor","name","TypeError","validateCallback","cb","validate","callback","env","LANG","PATH","process","execute","cmd","parser","filter","sync","arguments","length","stringify","execSync","catch","result","size","sizeSum","volumes","reduce","vol","space","total","filesystem","macOS","linux","windows","platform","devices","apply","COMMAND"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ENVIRONMENT = exports.inferDevSize = exports.filesystemSync = undefined;\n\nvar _toConsumableArray2 = require('babel-runtime/helpers/toConsumableArray');\n\nvar _toConsumableArray3 = _interopRequireDefault(_toConsumableArray2);\n\nvar _typeof2 = require('babel-runtime/helpers/typeof');\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _os = require('os');\n\nvar _os2 = _interopRequireDefault(_os);\n\nvar _child_process = require('child_process');\n\nvar _child_process2 = _interopRequireDefault(_child_process);\n\nvar _bluebird = require('bluebird');\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _functional = require('./functional');\n\nvar _functional2 = _interopRequireDefault(_functional);\n\nvar _utilities = require('./utilities');\n\nvar _linux = require('./linux');\n\nvar _linux2 = _interopRequireDefault(_linux);\n\nvar _macOS = require('./macOS');\n\nvar _macOS2 = _interopRequireDefault(_macOS);\n\nvar _windows = require('./windows');\n\nvar _windows2 = _interopRequireDefault(_windows);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar tautology = _functional2.default.tautology,\n    thrower = _functional2.default.thrower;\nvar _F$R = _functional2.default.R,\n    compose = _F$R.compose,\n    composeP = _F$R.composeP;\n\n_child_process2.default.exec = _bluebird2.default.promisify(_child_process2.default.exec, { context: _child_process2.default });\n\n// --------------------------------------\n// Common Core - Validation\n// --------------------------------------\n\nvar validateDev = function validateDev(dev) {\n  if (typeof dev === 'function') {\n    return dev;\n  } else if (typeof dev === 'string') {\n    return function (v, k) {\n      return (0, _utilities.hasSubstr)(k, dev);\n    };\n  } else if (dev instanceof RegExp) {\n    return function (v, k) {\n      return dev.test(k);\n    };\n  } else if (typeof dev === 'undefined' || dev === null) {\n    return tautology;\n  }\n\n  thrower('fs.filesystem expected first argument \\'dev\\' to be a function, string, regex or undefined/null. ' + ('Found ' + ((typeof dev === 'undefined' ? 'undefined' : (0, _typeof3.default)(dev)) === 'object' ? dev.constructor.name : typeof dev === 'undefined' ? 'undefined' : (0, _typeof3.default)(dev)) + ' instead.'), TypeError);\n};\n\nvar validateCallback = function validateCallback(cb) {\n  if (typeof cb !== 'function') {\n    thrower('fs.filesystem expected second argument \\'callback\\' to be instanceof function. ' + ('Found ' + ((typeof cb === 'undefined' ? 'undefined' : (0, _typeof3.default)(cb)) === 'object' ? cb.constructor.name : typeof cb === 'undefined' ? 'undefined' : (0, _typeof3.default)(cb)) + ' instead.'), TypeError);\n  }\n\n  return cb;\n};\n\nvar validate = function validate(validateDev, validateCallback) {\n  return function (dev, callback) {\n    if (typeof dev === 'function' && !callback) {\n      return [tautology, dev];\n    }\n\n    return [validateDev(dev), validateCallback(callback)];\n  };\n};\n\n// --------------------------------------\n// Common Core - Main & Export Functions\n// --------------------------------------\n\nvar ENVIRONMENT = {\n  env: {\n    LANG: 'en_US.UTF-8',\n    PATH: process.env.PATH\n  }\n};\n\nvar execute = function execute(cmd, parser) {\n  return function (filter, cb) {\n    var sync = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n    if (sync) {\n      return compose(parser(filter), _utilities.stringify, _child_process2.default.execSync)(cmd, ENVIRONMENT);\n    }\n    return composeP(function (v) {\n      return cb(null, v);\n    }, parser(filter), _utilities.stringify, _child_process2.default.exec)(cmd, ENVIRONMENT).catch(cb);\n  };\n};\n\nvar inferDevSize = function inferDevSize(result) {\n  for (var k in result) {\n    if (result[k].size === null) {\n      var sizeSum = result[k].volumes.reduce(function (size, vol) {\n        return size + vol.space.total;\n      }, 0);\n      result[k].size = sizeSum;\n    }\n  }\n  return result;\n};\n\nvar filesystem = function filesystem(macOS, linux, windows, validate, platform) {\n  return function (dev, callback) {\n    var devices = null;\n    switch (platform) {\n      case 'darwin':\n        devices = macOS.apply(undefined, (0, _toConsumableArray3.default)(validate(dev, callback))).devices;\n        break;\n      case 'linux':\n        devices = linux.apply(undefined, (0, _toConsumableArray3.default)(validate(dev, callback))).devices;\n        break;\n      case 'win32':\n        devices = windows.apply(undefined, (0, _toConsumableArray3.default)(validate(dev, callback))).devices;\n        break;\n      default:\n        thrower('fs.filesystem : Unsupported OS. fs.filesystem does not support ' + (platform + ' at the moment'));\n    }\n    return inferDevSize(devices);\n  };\n};\n\nvar filesystemSync = function filesystemSync(macOS, linux, windows, validateDev, platform) {\n  return function (dev) {\n    var devices = null;\n    switch (platform) {\n      case 'darwin':\n        devices = macOS(validateDev(dev), null, true).devices;\n        break;\n      case 'linux':\n        devices = linux(validateDev(dev), null, true).devices;\n        break;\n      case 'win32':\n        devices = windows(validateDev(dev), null, true).devices;\n        break;\n      default:\n        thrower('fs.filesystem : Unsupported OS. fs.filesystem does not support ' + (platform + ' at the moment'));\n    }\n    return inferDevSize(devices);\n  };\n};\n\nvar sync = filesystemSync(execute(_macOS2.default.COMMAND, _macOS2.default.parser), execute(_linux2.default.COMMAND, _linux2.default.parser), execute(_windows2.default.COMMAND, _windows2.default.parser), validateDev, _os2.default.platform());\n\nexports.filesystemSync = sync;\nexports.inferDevSize = inferDevSize;\nexports.ENVIRONMENT = ENVIRONMENT;\nexports.default = filesystem(execute(_macOS2.default.COMMAND, _macOS2.default.parser), execute(_linux2.default.COMMAND, _linux2.default.parser), execute(_windows2.default.COMMAND, _windows2.default.parser), validate(validateDev, validateCallback), _os2.default.platform());"]},"metadata":{},"sourceType":"script"}